# Git/Github 사용법 공부

## 1. 깃/깃헙 사용 기본 매커니즘

### 1) 깃/깃헙의 개념

- 깃헙은 깃을 활용한 일종의 버전관리툴이라고 할 수 있음.
- 깃헙은 하나의 원격저장소로, 깃을 활용하여 작업한 내용의 다양한 버전, 변경사항을 세이브, 회귀할 수 있게 함.

### 2) 깃헙 계정 생성 및 활용

#### (1) 토큰 생성

- 2020년 7월자로 깃, 깃허브는 토큰 인증 방식을 기본으로 하고 있기 때문에, 기본적으로 setting -> developer setting에서 아래와 같은 권한들을 포함해서 토큰을 생성해주는 것이 좋음.

#### (2) 라이센스 발급

- 라이센스는 저장소에서 할 수 있는 것과 할 수 없는 것에 대한 규칙을 지정하는 것임.
- 일반적으로 MIT 라이센스가 많이 활용되며, 이는 오픈소스로서 상업적 용도로의 활용 가능을 의미함.

#### (3) 저장소별 인증 사용자 변경하기

- 깃헙 계정을 여러 개 활용할 시, 각 계정의 저장소들을 이용하기 위해서는 각 저장소에 맞는 계정들을 사용해야함. 소스트리로는 GUI 방식으로 바로 전환할 수 있음.
- CLI를 이용한 사용자 전환 방법은 다음과 같음.
  `git config credential.username '사용할 계정 메일`
- \*\*\* 소스트리 - GITbash 간 사용자 변경 호환 안될때는 windows '자격 증명 관리자'에서 git 관련 증명 다 삭제하면 될 수도 있음.

## 2. Github, Sourcetree 활용

- Sourcetree는 git을 GUI 방식으로 컨트롤 할 수 있는 프로그램임.

### 1) 깃헙 저장소 클론하기

`git clone <저장소 주소>`

- 로컬의 지정된 경로에 저장소 이름으로 된 깃 폴더가 생성됨.

### 2) Add

`git add ~~`

- 커밋할 파일을 깃 스테이지에 올리는 기능.

### 3) commit

- 로컬 상에서 파일을 깃 폴더에 저장하는 기능.
- commit한 모든 파일은 다시 되돌아 갈 수 있음.

### 4) push

- 로컬 상에서 commit된 파일을 github의 원격저장소에 저장하는 기능.

### 5) branch

- branch는 깃폴더 상 하나의 '가상공간'과 같은 개념임.
- 기존 작업 내용을 유지한 채, 다른 내용을 따로 구현하고 싶을 때 활용하는 기능.
- 소스트리 상에서는 브랜치를 생성할 커밋 -> 마우스 우클릭 -> 브랜치 클릭으로 생성가능.
- 현재 작업 중인 branch는 'Head Branch'라고 함.
- 일반적으로 여러 branch 중 최종본에 해당하는 파일은 main branch에 저장함.

### 6) checkout

- 특정 commit, branch로 이동하는 것.

### 7) merge(병합)

- 한 branch와 다른 branch를 합치는 것.
- merge 시, '충돌'이 발생할 수 있는데, 이는 다음 방법으로 해결할 수 있음.
  - 에디터에서 수동으로 수정
  - git reset을 이용해서 merge 이전 상태로 회귀
  - 소스트리 상에서 '충돌 해결 -> branchA/B 중 한 branch로 선택하여 저장, 커밋.

### 8) pull

- Github의 파일이 로컬 파일보다 최신일 경우, 로컬 파일을 Github의 파일로 업데이트 하는 과정
- 아래의 경우에 충돌이 발생할 가능성이 크다.
  - 두 커밋이 한 파일을 수정했을 경우
  - 자동병합과정에서의 오류

### 9) 이전 커밋으로 되돌리기

#### (1) reset

- 커밋이 잘못 작성된 경우, 이를 삭제하는 기능.
- 소스트리 상에서 회귀하고 싶은 커밋에서 '이 커밋까지 현재 브런치 초기화 -> hard' 클릭 시 실행 가능.
- reset 시, 이전 커밋이 모두 삭제되므로 유의해서 사용해야 함.
- 원격저장소에 reset 시킨 커밋이 이미 push된 상태일 경우, reset 이후에 push를 하려면 강제푸시를 해야함.
  ` git push --force`

#### (2) 되돌리고자 하는 커밋에서 branch 생성하기.

- 되돌릴 커밋에서 branch를 생성하여, 해당 branch에서 작업 후, main branch와 병합, 충돌 해결.
- 강제 푸시를 안해도 되지만, 트리가 다소 지저분해질 수 있음.

#### (3) revert

- 커밋을 보존한 채, 작업 내용만 되돌리는 기능.
  - Gitbash: `git revert HEAD`
  - Sourcetree: `현재 커밋 -> 마우스 우클릭 -> 커밋 되돌리기 클릭`
- 장점: 커밋을 보존할 수 있다.
- revert로 두 개 이상 커밋 되돌리기
  - Gitbash: `git revert HEAD HEAD~1` (현재 커밋 + 그 이전 커밋까지 함께 revert)
  - Sourcetree: ` 최신 순서대로 커밋을 revert`

### 10) 커밋하지 않은 변경 사항이 있을 때, 다른 branch로 checkout하기

#### (1) git commit --ammend 이용하기

- branch1에서 작업이 완료되지 않은 파일을 임시로 commit.
- brnach2로 체크아웃, branch2의 작업 완료하고 다시 branch1로 체크아웃.
- 임시로 commit한 파일에서 작업 수정 후, git commit -ammend로 임시 커밋을 수정.
  - Sourcetree 상에서 ammend는 커밋 창 -> 마지막 커밋 정정 실행.

#### (2) stash 이용하기

- stash는 하나의 임시 공간임.
- branch1에서 작업이 완료되지 않은 파일을 stash로 전송.
- branch2로 체크아웃하여 작업 완료 후 branch1로 체크아웃.
- stash에 전송한 파일을 적용하여 작업 완료 후 commit
  \*\*\* git에 업로드한 적 없는 새 파일을 stash로 보내기 위해서는 해당 파일을 먼저 git add로 스테이지에 올려야함.
